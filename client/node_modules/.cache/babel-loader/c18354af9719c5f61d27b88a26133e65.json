{"ast":null,"code":"import _defineProperty from\"/home/king/Desktop/lindabirthday/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/king/Desktop/lindabirthday/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/king/Desktop/lindabirthday/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from'react';import AlertContext from'../../context/alert/alertContext';import AuthContext from'../../context/auth/authContext';var Login=function Login(props){var alertContext=useContext(AlertContext);var authContext=useContext(AuthContext);var setAlert=alertContext.setAlert;var login=authContext.login,error=authContext.error,clearErrors=authContext.clearErrors,isAuthenticated=authContext.isAuthenticated;var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var email=user.email,password=user.password;useEffect(function(){// If we are logged in successfully, redirect to the home page\nif(isAuthenticated){props.history.push('/');}if(error==='Invalid credentials'){setAlert(authContext.error,'danger');clearErrors();}//eslint-disable-next-line\n},[error,props.history,isAuthenticated]);var onChange=function onChange(e){return setUser(_objectSpread({},user,_defineProperty({},e.target.name,e.target.value)));};var onSubmit=function onSubmit(e){e.preventDefault();login({email:email,password:password});};return React.createElement(\"div\",{className:\"form-container\"},React.createElement(\"h1\",null,\"Account \",React.createElement(\"span\",{className:\"text-primary\"},\"Login\")),React.createElement(\"form\",{onSubmit:onSubmit},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"email\"},\"Email\"),React.createElement(\"input\",{type:\"email\",name:\"email\",value:email,onChange:onChange,required:true})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),React.createElement(\"input\",{type:\"password\",name:\"password\",value:password,onChange:onChange,required:true})),React.createElement(\"input\",{type:\"submit\",value:\"Login\",className:\"btn btn-primary btn-block\"})));};export default Login;","map":{"version":3,"sources":["/home/king/Desktop/lindabirthday/client/src/components/Auth/Login.js"],"names":["React","useState","useContext","useEffect","AlertContext","AuthContext","Login","props","alertContext","authContext","setAlert","login","error","clearErrors","isAuthenticated","email","password","user","setUser","history","push","onChange","e","target","name","value","onSubmit","preventDefault"],"mappings":"+WAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,YAAP,KAAyB,kCAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,gCAAxB,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,CACrB,GAAMC,CAAAA,YAAY,CAAGN,UAAU,CAACE,YAAD,CAA/B,CACA,GAAMK,CAAAA,WAAW,CAAGP,UAAU,CAACG,WAAD,CAA9B,CAFqB,GAIbK,CAAAA,QAJa,CAIAF,YAJA,CAIbE,QAJa,IAKbC,CAAAA,KALa,CAKkCF,WALlC,CAKbE,KALa,CAKNC,KALM,CAKkCH,WALlC,CAKNG,KALM,CAKCC,WALD,CAKkCJ,WALlC,CAKCI,WALD,CAKcC,eALd,CAKkCL,WALlC,CAKcK,eALd,eAOGb,QAAQ,CAAC,CAC7Bc,KAAK,CAAE,EADsB,CAE7BC,QAAQ,CAAE,EAFmB,CAAD,CAPX,wCAOdC,IAPc,eAORC,OAPQ,kBAYbH,CAAAA,KAZa,CAYOE,IAZP,CAYbF,KAZa,CAYNC,QAZM,CAYOC,IAZP,CAYND,QAZM,CAcrBb,SAAS,CAAC,UAAM,CACZ;AACA,GAAIW,eAAJ,CAAqB,CACjBP,KAAK,CAACY,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACH,CACD,GAAIR,KAAK,GAAK,qBAAd,CAAqC,CACjCF,QAAQ,CAACD,WAAW,CAACG,KAAb,CAAoB,QAApB,CAAR,CACAC,WAAW,GACd,CACD;AACH,CAVQ,CAUL,CAACD,KAAD,CAAQL,KAAK,CAACY,OAAd,CAAuBL,eAAvB,CAVK,CAAT,CAYA,GAAMO,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAC,CAAC,QAAIJ,CAAAA,OAAO,kBAAKD,IAAL,oBAAYK,CAAC,CAACC,MAAF,CAASC,IAArB,CAA6BF,CAAC,CAACC,MAAF,CAASE,KAAtC,GAAX,EAAlB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAJ,CAAC,CAAI,CAClBA,CAAC,CAACK,cAAF,GACAhB,KAAK,CAAC,CACFI,KAAK,CAALA,KADE,CAEFC,QAAQ,CAARA,QAFE,CAAD,CAAL,CAIH,CAND,CAOA,MACI,4BAAK,SAAS,CAAE,gBAAhB,EACI,yCACY,4BAAM,SAAS,CAAE,cAAjB,UADZ,CADJ,CAII,4BAAM,QAAQ,CAAIU,QAAlB,EACI,2BAAK,SAAS,CAAE,YAAhB,EACA,6BAAO,OAAO,CAAE,OAAhB,UADA,CAEI,6BAAO,IAAI,CAAE,OAAb,CAAqB,IAAI,CAAC,OAA1B,CAAkC,KAAK,CAAGX,KAA1C,CAAiD,QAAQ,CAAIM,QAA7D,CAAuE,QAAQ,KAA/E,EAFJ,CADJ,CAKI,2BAAK,SAAS,CAAE,YAAhB,EACA,6BAAO,OAAO,CAAE,UAAhB,aADA,CAEI,6BAAO,IAAI,CAAE,UAAb,CAAwB,IAAI,CAAC,UAA7B,CAAwC,KAAK,CAAGL,QAAhD,CAA0D,QAAQ,CAAIK,QAAtE,CAAgF,QAAQ,KAAxF,EAFJ,CALJ,CASI,6BAAO,IAAI,CAAE,QAAb,CAAsB,KAAK,CAAE,OAA7B,CAAqC,SAAS,CAAE,2BAAhD,EATJ,CAJJ,CADJ,CAkBH,CArDD,CAuDA,cAAef,CAAAA,KAAf","sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\nimport AlertContext from '../../context/alert/alertContext'\nimport AuthContext from '../../context/auth/authContext'\n\nconst Login = (props) => {\n    const alertContext = useContext(AlertContext)\n    const authContext = useContext(AuthContext)\n\n    const { setAlert } = alertContext\n    const { login, error, clearErrors, isAuthenticated } = authContext;\n\n    const [user, setUser] = useState({\n        email: '',\n        password: ''\n    })\n\n    const { email, password } = user\n\n    useEffect(() => {\n        // If we are logged in successfully, redirect to the home page\n        if (isAuthenticated) {\n            props.history.push('/')\n        }\n        if (error === 'Invalid credentials') {\n            setAlert(authContext.error, 'danger')\n            clearErrors()\n        }\n        //eslint-disable-next-line\n    },  [error, props.history, isAuthenticated])\n\n    const onChange = e => setUser({...user, [e.target.name] : e.target.value})\n\n    const onSubmit = e => {\n        e.preventDefault()\n        login({\n            email,\n            password\n        })\n    }\n    return (\n        <div className= \"form-container\">\n            <h1>\n                Account <span className= \"text-primary\">Login</span>\n            </h1>\n            <form onSubmit = {onSubmit}>\n                <div className= \"form-group\">\n                <label htmlFor= \"email\">Email</label>\n                    <input type= \"email\" name=\"email\" value= {email} onChange = {onChange} required/>\n                </div>\n                <div className= \"form-group\">\n                <label htmlFor= \"password\">Password</label>\n                    <input type= \"password\" name=\"password\" value= {password} onChange = {onChange} required/>\n                </div>\n                <input type= \"submit\" value= \"Login\" className= \"btn btn-primary btn-block\" />\n            </form>\n        </div>\n    )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}