{"ast":null,"code":"import _defineProperty from\"/home/king/Desktop/lindabirthday/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/king/Desktop/lindabirthday/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/king/Desktop/lindabirthday/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from'react';import AlertContext from'../../context/alert/alertContext';import AuthContext from'../../context/auth/authContext';var Register=function Register(props){var _useState=useState({name:'',email:'',password:'',password2:''}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var name=user.name,email=user.email,password=user.password,password2=user.password2;var alertContext=useContext(AlertContext);var authContext=useContext(AuthContext);var isAuthenticated=authContext.isAuthenticated,error=authContext.error,clearErrors=authContext.clearErrors,register=authContext.register;var setAlert=alertContext.setAlert;useEffect(function(){// If we are logged in successfully, redirect to the home page\nif(isAuthenticated){props.history.push('/');}if(error==='User already exists'){setAlert(error,'danger');clearErrors();}//eslint-disable-next-line\n},[error,props.history,isAuthenticated]);var onChange=function onChange(e){return setUser(_objectSpread({},user,_defineProperty({},e.target.name,e.target.value)));};var onSubmit=function onSubmit(e){e.preventDefault();var valid=true;if(name===''||email===''||password===''){valid=false;setAlert('Please enter all fields','danger');}if(password!==password2){valid=false;setAlert('Passwords do not match','danger');}if(valid){register({email:email,name:name,password:password});}};return React.createElement(\"div\",{className:\"form-container\"},React.createElement(\"h1\",null,\"Account \",React.createElement(\"span\",{className:\"text-primary\"},\"Register\")),React.createElement(\"form\",{onSubmit:onSubmit},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"name\"},\"Name\"),React.createElement(\"input\",{type:\"text\",name:\"name\",value:name,onChange:onChange,required:true})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"email\"},\"Email\"),React.createElement(\"input\",{type:\"email\",name:\"email\",value:email,onChange:onChange,required:true})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),React.createElement(\"input\",{type:\"password\",name:\"password\",value:password,onChange:onChange,required:true,minLength:\"6\"})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",{htmlFor:\"password2\"},\"Confirm Password\"),React.createElement(\"input\",{type:\"password\",name:\"password2\",value:password2,onChange:onChange,required:true,minLength:\"6\"})),React.createElement(\"input\",{type:\"submit\",value:\"Register\",className:\"btn btn-primary btn-block\"})));};export default Register;","map":{"version":3,"sources":["/home/king/Desktop/lindabirthday/client/src/components/Auth/Register.js"],"names":["React","useState","useContext","useEffect","AlertContext","AuthContext","Register","props","name","email","password","password2","user","setUser","alertContext","authContext","isAuthenticated","error","clearErrors","register","setAlert","history","push","onChange","e","target","value","onSubmit","preventDefault","valid"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react'\nimport AlertContext from '../../context/alert/alertContext'\nimport AuthContext from '../../context/auth/authContext'\n\nconst Register = (props) => {\n    const [user, setUser] = useState({\n        name: '',\n        email: '',\n        password: '',\n        password2: ''\n    })\n\n    const { name, email, password, password2 } = user\n    const alertContext = useContext(AlertContext)\n    const authContext = useContext(AuthContext)\n    const { isAuthenticated, error, clearErrors, register } = authContext\n    const { setAlert } = alertContext\n\n    useEffect(() => {\n        // If we are logged in successfully, redirect to the home page\n        if (isAuthenticated) {\n            props.history.push('/')\n        }\n        if (error === 'User already exists') {\n            setAlert(error, 'danger')\n            clearErrors()\n        }\n        //eslint-disable-next-line\n    }, [error, props.history, isAuthenticated])\n\n\n    const onChange = e => setUser({...user, [e.target.name] : e.target.value})\n\n    const onSubmit = e => {\n        e.preventDefault()\n        let valid = true\n        if (name === '' || email === '' || password === '') {\n            valid = false\n            setAlert('Please enter all fields', 'danger')\n        } \n        if (password !== password2) {\n            valid = false\n            setAlert('Passwords do not match', 'danger')\n        } \n        if (valid) {\n            register({\n                email,\n                name,\n                password\n            })\n            \n        }       \n    }\n\n    return (\n        <div className= \"form-container\">\n            <h1>\n                Account <span className= \"text-primary\">Register</span>\n            </h1>\n            <form onSubmit = {onSubmit}>\n                <div className= \"form-group\">\n                    <label htmlFor= \"name\">Name</label>\n                    <input type= \"text\" name=\"name\" value= {name} onChange = {onChange} required/>\n                </div>\n                <div className= \"form-group\">\n                <label htmlFor= \"email\">Email</label>\n                    <input type= \"email\" name=\"email\" value= {email} onChange = {onChange} required/>\n                </div>\n                <div className= \"form-group\">\n                <label htmlFor= \"password\">Password</label>\n                    <input type= \"password\" name=\"password\" value= {password} onChange = {onChange} required minLength= \"6\"/>\n                </div>\n                <div className= \"form-group\">\n                    <label htmlFor= \"password2\">Confirm Password</label>\n                    <input type= \"password\" name=\"password2\" value= {password2} onChange = {onChange} required minLength= \"6\"/>\n                </div>\n                <input type= \"submit\" value= \"Register\" className= \"btn btn-primary btn-block\" />\n            </form>\n        </div>\n    )\n}\n\nexport default Register\n"]},"metadata":{},"sourceType":"module"}